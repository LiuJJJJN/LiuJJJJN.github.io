<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noodp" />
    <title class="pjax-title">SpringBoot自学笔记md版 - LiuJN 的个人博客</title><meta name="Description" content="This is LiuJN"><meta property="og:title" content="SpringBoot自学笔记md版" />
<meta property="og:description" content="SpringBoot 大连交通大学 信息学院 刘嘉宁 2021-11-15 笔记摘自 bjpwernode 秦世国 SpringBoot 框架，整合了 Spring &#43; SpringMVC &#43; MyBatis 框架，简化开发 SpringBoot 抛弃了繁琐的 xml 配置过程，采用大量默认配置，简化开发 使用" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://liujjjjn.github.io/springboot%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0md%E7%89%88/" /><meta property="og:image" content="https://liujjjjn.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-15T00:00:00+08:00" />
<meta property="article:modified_time" content="2021-11-15T00:00:00+08:00" /><meta property="og:site_name" content="刘嘉宁的个人博客" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://liujjjjn.github.io/logo.png"/>

<meta name="twitter:title" content="SpringBoot自学笔记md版"/>
<meta name="twitter:description" content="SpringBoot 大连交通大学 信息学院 刘嘉宁 2021-11-15 笔记摘自 bjpwernode 秦世国 SpringBoot 框架，整合了 Spring &#43; SpringMVC &#43; MyBatis 框架，简化开发 SpringBoot 抛弃了繁琐的 xml 配置过程，采用大量默认配置，简化开发 使用"/>
<meta name="application-name" content="LiuJN">
<meta name="apple-mobile-web-app-title" content="LiuJN">

<meta name="theme-color" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="https://liujjjjn.github.io/springboot%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0md%E7%89%88/" /><link rel="prev" href="https://liujjjjn.github.io/dubbo%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0md%E7%89%88/" /><link rel="next" href="https://liujjjjn.github.io/rabbitmq%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0md%E7%89%88/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/fontawesome-free/all.min.css">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/animate/animate.min.css">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "SpringBoot自学笔记md版",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/liujjjjn.github.io\/springboot%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0md%E7%89%88\/"
        },"genre": "posts","wordcount":  8393 ,
        "url": "https:\/\/liujjjjn.github.io\/springboot%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0md%E7%89%88\/","datePublished": "2021-11-15T00:00:00+08:00","dateModified": "2021-11-15T00:00:00+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "刘嘉宁"
            },"description": ""
    }
    </script></head>

<body header-desktop="auto" header-mobile="auto"><script type="text/javascript">
        function setTheme(theme) {document.body.setAttribute('theme', theme); document.documentElement.style.setProperty('color-scheme', theme === 'light' ? 'light' : 'dark');}
        function saveTheme(theme) {window.localStorage && localStorage.setItem('theme', theme);}
        function getMeta(metaName) {const metas = document.getElementsByTagName('meta'); for (let i = 0; i < metas.length; i++) if (metas[i].getAttribute('name') === metaName) return metas[i]; return '';}
        if (window.localStorage && localStorage.getItem('theme')) {let theme = localStorage.getItem('theme');theme === 'light' || theme === 'dark' || theme === 'black' ? setTheme(theme) : (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light')); } else { if ('auto' === 'light' || 'auto' === 'dark' || 'auto' === 'black') setTheme('auto'), saveTheme('auto'); else saveTheme('auto'), window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light');}
        let metaColors = {'light': '#f8f8f8','dark': '#252627','black': '#000000'}
        getMeta('theme-color').content = metaColors[document.body.getAttribute('theme')];
    </script>
    <div id="back-to-top"></div>
    <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="LiuJN 的个人博客">刘嘉宁的个人博客</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="#" onclick="return false;" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" onclick="return false;" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="#" onclick="return false;" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="LiuJN 的个人博客">刘嘉宁的个人博客</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="#" onclick="return false;" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" onclick="return false;" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="#" onclick="return false;" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a href="#" onclick="return false;" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
            <div class="container"><script>document.getElementsByTagName("main")[0].setAttribute("pageStyle", "normal")</script><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC", "false")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">SpringBoot自学笔记md版</h1><div class="post-meta">
            <div class="post-meta-line">
                <span class="post-author"><i class="author fas fa-user-circle fa-fw"></i><a href="https://liujjjjn.github.io/" title="Author" target="_blank" rel="noopener noreffer author" class="author">刘嘉宁</a>
                </span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-11-15">2021-11-15</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime="2021-11-15">2021-11-15</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 8393 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 17 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="true">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#springboot-的特性">SpringBoot 的特性</a></li>
    <li><a href="#springboot-的四大核心">SpringBoot 的四大核心</a></li>
    <li><a href="#搭建-springboot-项目">搭建 SpringBoot 项目</a>
      <ul>
        <li><a href="#springbootapplication-注解">@SpringBootApplication 注解</a></li>
        <li><a href="#分析-主方法内容">分析 主方法内容</a></li>
        <li><a href="#分析-pomxml-文件内容">分析 pom.xml 文件内容</a></li>
      </ul>
    </li>
    <li><a href="#属性配置文件">属性配置文件</a>
      <ul>
        <li><a href="#多环境配置">多环境配置</a></li>
        <li><a href="#自定义属性-value">自定义属性 @Value</a></li>
        <li><a href="#为对象注入属性-configurationproperties">为对象注入属性 @ConfigurationProperties</a></li>
        <li><a href="#中文乱码问题">中文乱码问题</a></li>
      </ul>
    </li>
    <li><a href="#springboot-使用-jsp-文件">SpringBoot 使用 JSP 文件</a></li>
    <li><a href="#springboot-整合-mybatis">SpringBoot 整合 MyBatis</a>
      <ul>
        <li><a href="#事务支持">事务支持</a></li>
      </ul>
    </li>
    <li><a href="#springboot-整合redis">SpringBoot 整合Redis</a>
      <ul>
        <li><a href="#redis-的缓存穿透问题">Redis 的缓存穿透问题</a></li>
        <li><a href="#redis-集群哨兵模式">Redis 集群、哨兵模式</a></li>
      </ul>
    </li>
    <li><a href="#springboot-热部署插件">SpringBoot 热部署插件：</a></li>
    <li><a href="#springboot-启动非-web-工程">SpringBoot 启动非 WEB 工程</a></li>
    <li><a href="#springboot-使用拦截器">SpringBoot 使用拦截器</a></li>
    <li><a href="#springboot-字符编码">SpringBoot 字符编码</a></li>
    <li><a href="#springboot-打包-war-包">SpringBoot 打包 war 包</a></li>
    <li><a href="#springboot-打包-jar-包">SpringBoot 打包 jar 包</a></li>
    <li><a href="#springboot-使用-servletfilter">SpringBoot 使用 Servlet，Filter</a></li>
    <li><a href="#sprintboot-健康检查机制">SprintBoot 健康检查机制</a></li>
    <li><a href="#springboot-中的-thymeleaf-模板">SpringBoot 中的 Thymeleaf 模板</a>
      <ul>
        <li><a href="#thymeleaf-的特点">Thymeleaf 的特点</a></li>
        <li><a href="#使用-thymeleaf">使用 Thymeleaf</a></li>
        <li><a href="#thymeleaf-的变量表达式">Thymeleaf 的变量表达式</a></li>
        <li><a href="#thymeleaf-的选择变量表达式">Thymeleaf 的选择变量表达式</a></li>
        <li><a href="#thymeleaf-的-url-表达式">Thymeleaf 的 URL 表达式</a></li>
        <li><a href="#thymeleaf-的常见属性">Thymeleaf 的常见属性</a></li>
        <li><a href="#thymeleaf-的-each-迭代-list-集合">Thymeleaf 的 each 迭代 List 集合</a></li>
        <li><a href="#thymeleaf-的-each-迭代-map-集合">Thymeleaf 的 each 迭代 Map 集合</a></li>
        <li><a href="#thymeleaf-的-ifunless-表达式">Thymeleaf 的 if、unless 表达式</a></li>
        <li><a href="#thymeleaf-的-switch-case-表达式">Thymeleaf 的 switch case 表达式</a></li>
        <li><a href="#thymeleaf-的内敛文本内敛脚本">Thymeleaf 的内敛文本、内敛脚本</a></li>
        <li><a href="#thymeleaf-的字符串拼接">Thymeleaf 的字符串拼接</a></li>
        <li><a href="#thymeleaf-的三元运算符">Thymeleaf 的三元运算符</a></li>
        <li><a href="#thymeleaf-的表达式基本对象">Thymeleaf 的表达式基本对象</a></li>
      </ul>
    </li>
    <li><a href="#springboot-的-rest-接口架构风格">SpringBoot 的 REST 接口架构风格</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="springboot" class="headerLink">
    <a href="#springboot" class="header-mark"></a>SpringBoot</h1><blockquote>
<p>大连交通大学 信息学院 刘嘉宁 2021-11-15</p>
<p>笔记摘自 bjpwernode 秦世国</p>
</blockquote>
<ul>
<li>
<p>SpringBoot 框架，整合了 Spring + SpringMVC + MyBatis 框架，简化开发</p>
</li>
<li>
<p>SpringBoot 抛弃了繁琐的 xml 配置过程，采用大量默认配置，简化开发</p>
</li>
<li>
<p>使用 SpringBoot 可以非常容易和快速的创建基于 Spring 框架的应用程序</p>
</li>
</ul>
<h2 id="springboot-的特性" class="headerLink">
    <a href="#springboot-%e7%9a%84%e7%89%b9%e6%80%a7" class="header-mark"></a>SpringBoot 的特性</h2><ol>
<li>能够快速创建基于 Spring 的应用程序</li>
<li>能够直接使用 java main 方法启动内嵌的 Tomcat 服务器运行 SpringBoot 程序，不需要外置 Tomcat 再部署 war 包文件</li>
<li>提供约定的 starter POM（起步依赖）简化 Maven 配置，引入相关依赖包，消除版本冲突问题</li>
<li>自动化配置，根据项目的 Maven 依赖配置，Spring boot 自动配置整合 ssm</li>
<li>提供了程序的健康检查等功能</li>
<li>基本可以抛弃XML配置文件，采用注解配置</li>
</ol>
<h2 id="springboot-的四大核心" class="headerLink">
    <a href="#springboot-%e7%9a%84%e5%9b%9b%e5%a4%a7%e6%a0%b8%e5%bf%83" class="header-mark"></a>SpringBoot 的四大核心</h2><ol>
<li>起步依赖
<ul>
<li>根据需要的功能自动配置 Maven 依赖</li>
</ul>
</li>
<li>自动配置
<ul>
<li>根据起步依赖自动提供相关配置</li>
</ul>
</li>
<li>Actuator
<ul>
<li>健康检查机制，可以看到 SpringBoot 运行状态信息</li>
</ul>
</li>
<li>命令行界面
<ul>
<li>主要针对 Groovy（一种基于 JVM 的敏捷开发语言）使用</li>
</ul>
</li>
</ol>
<h2 id="搭建-springboot-项目" class="headerLink">
    <a href="#%e6%90%ad%e5%bb%ba-springboot-%e9%a1%b9%e7%9b%ae" class="header-mark"></a>搭建 SpringBoot 项目</h2><ul>
<li>在创建 SpringBoot 模块时确保电脑联网，确认 Server URL 为：<code>start.springboot.io</code></li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211115141700272.png" alt="image-20211115141700272" style="zoom: 40%;" />
<ul>
<li>选择起步依赖</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211115165755302.png" alt="image-20211115165755302" style="zoom: 40%;" />
<ul>
<li>项目结构</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/SpringBoot.jpg" alt="SpringBoot" style="zoom: 67%;" />
<ul>
<li>编写控制器
<ul>
<li>因为这里控制器类使用的不是 <code>@Controller</code> 注解，所以其中方法返回值为页面的输出流信息，并不是对页面的请求转发</li>
<li><code>@RestController</code> 是一个复合注解，相当于为所有方法加上了 <code>@ResponseBody</code></li>
</ul>
</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211115173740863.png" alt="image-20211115173740863" style="zoom: 50%;" />
<ul>
<li>启动 SpringBoot 自带的 Tomcat 服务器</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211115174425021.png" alt="image-20211115174425021" style="zoom:50%;" />
<ul>
<li>成果</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211115174559360.png" alt="image-20211115174559360" style="zoom:50%;" />
<h3 id="springbootapplication-注解" class="headerLink">
    <a href="#springbootapplication-%e6%b3%a8%e8%a7%a3" class="header-mark"></a>@SpringBootApplication 注解</h3><ul>
<li>该注解为 SpringBoot 的==核心注解==</li>
<li>该注解标注的类为 SpringBoot 的程序入口类</li>
<li>SpringBoot 会扫描当前类 同级路径 以及 子孙路径 中所有标注了 SpringBoot 注解的类</li>
<li>主要作用是开启 SpringBoot 自动配置</li>
</ul>
<h3 id="分析-主方法内容" class="headerLink">
    <a href="#%e5%88%86%e6%9e%90-%e4%b8%bb%e6%96%b9%e6%b3%95%e5%86%85%e5%ae%b9" class="header-mark"></a>分析 主方法内容</h3><p><code>SpringApplication.run(SpringBootTestApplication.class, args);</code> : 启动 SpringBoot 应用</p>
<ul>
<li>
<p>运行此 run 方法后，会返回 Spring 的应用上下文 ApplicationContext</p>
</li>
<li>
<p>由于启动的是 WEB 应用，因此启动时会同时启动内嵌的 Tomcat 服务器</p>
</li>
<li>
<p>默认端口号为 8080，默认应用上下文路径为 &rsquo; &lsquo;（访问时无项目名）</p>
</li>
</ul>
<h3 id="分析-pomxml-文件内容" class="headerLink">
    <a href="#%e5%88%86%e6%9e%90-pomxml-%e6%96%87%e4%bb%b6%e5%86%85%e5%ae%b9" class="header-mark"></a>分析 pom.xml 文件内容</h3><p>pom.xml 中的依赖：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependencies&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--web项目环境的起步依赖--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--测试环境的起步依赖--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependencies&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><img src="SpringBoot自学笔记md版.assets/SpringBoot默认依赖环境.jpg" alt="SpringBoot默认依赖环境" style="zoom:50%;" />
<p>在 <code> &lt;parent&gt;</code> 标签中可以查看当前项目父项目 <code>spring-boot-starter-parent-2.5.6.pom</code> 的配置信息：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;properties&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--指定项目JDK版本--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;java.version&gt;</span>1.8<span class="nt">&lt;/java.version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--指定输入的字符集编码格式--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--指定输出的字符集编码格式--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.reporting.outputEncoding&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/properties&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;build&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--资源文件的路径、命名规范格式--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;resources&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;resource&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;directory&gt;</span>${basedir}/src/main/resources<span class="nt">&lt;/directory&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;filtering&gt;</span>true<span class="nt">&lt;/filtering&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;includes&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&lt;include&gt;</span>**/application*.yml<span class="nt">&lt;/include&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&lt;include&gt;</span>**/application*.yaml<span class="nt">&lt;/include&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&lt;include&gt;</span>**/application*.properties<span class="nt">&lt;/include&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/includes&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;/resource&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;resource&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;directory&gt;</span>${basedir}/src/main/resources<span class="nt">&lt;/directory&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;excludes&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&lt;exclude&gt;</span>**/application*.yml<span class="nt">&lt;/exclude&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&lt;exclude&gt;</span>**/application*.yaml<span class="nt">&lt;/exclude&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&lt;exclude&gt;</span>**/application*.properties<span class="nt">&lt;/exclude&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/excludes&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;/resource&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/resources&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/build&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在<strong>父项目</strong>的 <code>&lt;parent&gt;</code> 标签中可以查看父项目父项目 <code>spring-boot-dependencies-2.5.6.pom</code> 的配置信息：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--依赖的版本控制--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;properties&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--mysql数据库版本--&gt;</span>
</span></span><span class="line"><span class="cl">  	<span class="nt">&lt;mysql.version&gt;</span>8.0.27<span class="nt">&lt;/mysql.version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--Spring框架版本--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;spring-framework.version&gt;</span>5.3.12<span class="nt">&lt;/spring-framework.version&gt;</span>
</span></span><span class="line"><span class="cl">    .....
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/properties&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>这些都可以在当前项目的 pom.xml 中覆盖修改</li>
</ul>
<h2 id="属性配置文件" class="headerLink">
    <a href="#%e5%b1%9e%e6%80%a7%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" class="header-mark"></a>属性配置文件</h2><ul>
<li>用于改变 SpringBoot 的默认运行行为</li>
<li>可以通过这个文件改变 SpringBoot 的默认行为，例如 Tomcat 的默认端口号、上下文访问路径</li>
</ul>
<ol>
<li>application.properties</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 这里是 SpringBoot 的配置文件，可以通过这个文件改变 SpringBoot 的默认行为，例如 Tomcat 的默认端口号、上下文访问路径
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 设置 Tomcat 服务器端口号为 9100
</span></span><span class="line"><span class="cl">server.port=9100
</span></span><span class="line"><span class="cl"># 设置人下文访问路径(项目名)为 boot
</span></span><span class="line"><span class="cl">server.servlet.context-path=/boot
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>application.yml</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># yml/yaml 和 properties 一样，也是 SpringBoot 的配置文件，不过 yml 文件更具层次感</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">server</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">9100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">servlet</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">context-path</span><span class="p">:</span><span class="w"> </span><span class="l">/boot</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>properties 和 yml 文件同时存在时，properties 文件的优先级更高</li>
</ul>
<h3 id="多环境配置" class="headerLink">
    <a href="#%e5%a4%9a%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae" class="header-mark"></a>多环境配置</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 激活配置文件，相当于把 dev 中的内容拷贝到这（多文件可以逗号分割）
</span></span><span class="line"><span class="cl">spring.profiles.active=online
</span></span></code></pre></td></tr></table>
</div>
</div><img src="SpringBoot自学笔记md版.assets/image-20211115212028784.png" alt="image-20211115212028784" style="zoom:50%;" />
<h3 id="自定义属性-value" class="headerLink">
    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%b1%9e%e6%80%a7-value" class="header-mark"></a>自定义属性 @Value</h3><ul>
<li>在 application 类可识别的任何类中都可以使用 <code>@Value(${属性名})</code> 为变量赋值</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 注意：不能使用中文，不能使用敏感词如 name...
</span></span><span class="line"><span class="cl">stuName = zhangsan
</span></span><span class="line"><span class="cl">stuAge = 24
</span></span></code></pre></td></tr></table>
</div>
</div><img src="SpringBoot自学笔记md版.assets/image-20211115212833286.png" alt="image-20211115212833286" style="zoom: 50%;" />
<h3 id="为对象注入属性-configurationproperties" class="headerLink">
    <a href="#%e4%b8%ba%e5%af%b9%e8%b1%a1%e6%b3%a8%e5%85%a5%e5%b1%9e%e6%80%a7-configurationproperties" class="header-mark"></a>为对象注入属性 @ConfigurationProperties</h3><ul>
<li>在类上方标注注解 <code>@ConfigurationProperties(prefix = &quot;前缀&quot;)</code></li>
<li>此类必须有 get / set 方法，必须由 Spring 容器管理</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@ConfigurationProperties</span><span class="o">(</span><span class="n">prefix</span> <span class="o">=</span> <span class="s">&#34;stu&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Component</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Student</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">getAge</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">age</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAge</span><span class="o">(</span><span class="n">Integer</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">stu.name = zhangsan
</span></span><span class="line"><span class="cl">stu.age = 24
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="中文乱码问题" class="headerLink">
    <a href="#%e4%b8%ad%e6%96%87%e4%b9%b1%e7%a0%81%e9%97%ae%e9%a2%98" class="header-mark"></a>中文乱码问题</h3><ul>
<li>当属性值为中文时会产生乱码问题，例：</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">stu.name = 张三
</span></span><span class="line"><span class="cl">stu.age = 24
</span></span></code></pre></td></tr></table>
</div>
</div><img src="SpringBoot自学笔记md版.assets/image-20211115215650714.png" alt="image-20211115215650714" style="zoom:50%;" />
<ul>
<li>解决方案：使用unicode编码的中文：百度一下 &ldquo;中文转unicode&rdquo;</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 张三 =&gt; \u5f20\u4e09
</span></span><span class="line"><span class="cl">stu.name = \u5f20\u4e09
</span></span><span class="line"><span class="cl">stu.age = 24
</span></span></code></pre></td></tr></table>
</div>
</div><img src="SpringBoot自学笔记md版.assets/image-20211115215848018.png" alt="image-20211115215848018" style="zoom:50%;" />
<h2 id="springboot-使用-jsp-文件" class="headerLink">
    <a href="#springboot-%e4%bd%bf%e7%94%a8-jsp-%e6%96%87%e4%bb%b6" class="header-mark"></a>SpringBoot 使用 JSP 文件</h2><ul>
<li>SpringBoot 默认<strong>不推荐 JSP</strong>，想使用 JSP 需要在 pom.xml 手动导入相关依赖</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--引入Spring Boot内嵌的Tomcat对JSP的解析包，不加解析不了jsp页面--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;groupId&gt;</span>org.apache.tomcat.embed<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;artifactId&gt;</span>tomcat-embed-jasper<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- servlet依赖的jar包start ，可选--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;groupId&gt;</span>javax.servlet<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;artifactId&gt;</span>javax.servlet-api<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- servlet依赖的jar包end --&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- jsp依赖jar包start ，可选--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;groupId&gt;</span>javax.servlet.jsp<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;artifactId&gt;</span>javax.servlet.jsp-api<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;version&gt;</span>2.3.1<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- jsp依赖jar包end --&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--jstl标签依赖的jar包start ，可选--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;groupId&gt;</span>javax.servlet<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;artifactId&gt;</span>jstl<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--jstl标签依赖的jar包end --&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;resources&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;resource&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--源文件位置 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;directory&gt;</span>src/main/webapp<span class="nt">&lt;/directory&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--编译到 META-INF/resourece 目录下不能随便写 这个路径表示编译后的根路径 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;targetPath&gt;</span>META-INF/resources<span class="nt">&lt;/targetPath&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;includes&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="c">&lt;!--要那些文件编译过去，**表示 webapp 目录下以及子孙目录，*.* 表示所有文件 --&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;include&gt;</span>**/*.*<span class="nt">&lt;/include&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/includes&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/resource&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/resources&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在 application.properties 文件中加入视图解析器</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#视图解析器， / 相当于 src/main/webapp 目录
</span></span><span class="line"><span class="cl">spring.mvc.view.prefix=/
</span></span><span class="line"><span class="cl">spring.mvc.view.suffix=.jsp
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="springboot-整合-mybatis" class="headerLink">
    <a href="#springboot-%e6%95%b4%e5%90%88-mybatis" class="header-mark"></a>SpringBoot 整合 MyBatis</h2><ul>
<li>在创建项目时勾选 SQL  中的 MyBatis Framework 和 MySQL Driver，基础整合 SSM</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211116111052101.png" alt="image-20211116111052101" style="zoom:50%;" />
<ul>
<li>在 pom.xml 中修改 MySQL 版本</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="c">&lt;!--指定MySQL驱动版本--&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>8.0.27<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>添加 MyBatis 逆向工程插件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;groupId&gt;</span>org.mybatis.generator<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;artifactId&gt;</span>mybatis-generator-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;version&gt;</span>1.3.6<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="c">&lt;!--配置文件的位置--&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&lt;configurationFile&gt;</span>GeneratorMapper.xml<span class="nt">&lt;/configurationFile&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&lt;verbose&gt;</span>true<span class="nt">&lt;/verbose&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&lt;overwrite&gt;</span>true<span class="nt">&lt;/overwrite&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;/configuration&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/plugin&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>在项目根目录下创建 <code>GeneratorMapper.xml</code> 逆向工程映射文件，并配置信息</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE generatorConfiguration
</span></span></span><span class="line"><span class="cl"><span class="cp">        PUBLIC &#34;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">        &#34;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;generatorConfiguration&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!-- 指定连接数据库的JDBC驱动包所在位置，指定到你本机的完整路径 --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;classPathEntry</span> <span class="na">location=</span><span class="s">&#34;D:\Document\JDBC\mysql-connector-java-8.0.27.jar&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!-- 配置table表信息内容体，targetRuntime指定采用MyBatis3的版本 --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;context</span> <span class="na">id=</span><span class="s">&#34;tables&#34;</span> <span class="na">targetRuntime=</span><span class="s">&#34;MyBatis3&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- 抑制生成注释，由于生成的注释都是英文的，可以不让它生成 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;commentGenerator&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;suppressAllComments&#34;</span> <span class="na">value=</span><span class="s">&#34;true&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/commentGenerator&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- 配置数据库连接信息 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;jdbcConnection</span> <span class="na">driverClass=</span><span class="s">&#34;com.mysql.cj.jdbc.Driver&#34;</span>
</span></span><span class="line"><span class="cl">                        <span class="na">connectionURL=</span><span class="s">&#34;jdbc:mysql://127.0.0.1:3306/springbootdb&#34;</span>
</span></span><span class="line"><span class="cl">                        <span class="na">userId=</span><span class="s">&#34;root&#34;</span>
</span></span><span class="line"><span class="cl">                        <span class="na">password=</span><span class="s">&#34;129807&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/jdbcConnection&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- 生成model类，targetPackage指定model类的包名， targetProject指定生成的model放在eclipse的哪个工程下面--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;javaModelGenerator</span> <span class="na">targetPackage=</span><span class="s">&#34;com.bjpn.springbootmybatis.model&#34;</span> <span class="na">targetProject=</span><span class="s">&#34;src/main/java&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;enableSubPackages&#34;</span> <span class="na">value=</span><span class="s">&#34;false&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;trimStrings&#34;</span> <span class="na">value=</span><span class="s">&#34;false&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/javaModelGenerator&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- 生成MyBatis的Mapper.xml文件，targetPackage指定mapper.xml文件的包名， targetProject指定生成的mapper.xml放在eclipse的哪个工程下面 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;sqlMapGenerator</span> <span class="na">targetPackage=</span><span class="s">&#34;com.bjpn.springbootmybatis.mapper&#34;</span> <span class="na">targetProject=</span><span class="s">&#34;src/main/java&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;enableSubPackages&#34;</span> <span class="na">value=</span><span class="s">&#34;false&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/sqlMapGenerator&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- 生成MyBatis的Mapper接口类文件,targetPackage指定Mapper接口类的包名， targetProject指定生成的Mapper接口放在eclipse的哪个工程下面 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;javaClientGenerator</span> <span class="na">type=</span><span class="s">&#34;XMLMAPPER&#34;</span> <span class="na">targetPackage=</span><span class="s">&#34;com.bjpn.springbootmybatis.mapper&#34;</span> <span class="na">targetProject=</span><span class="s">&#34;src/main/java&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;enableSubPackages&#34;</span> <span class="na">value=</span><span class="s">&#34;false&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/javaClientGenerator&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- 数据库表名及对应的Java模型类名 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;table</span> <span class="na">tableName=</span><span class="s">&#34;t_user&#34;</span>
</span></span><span class="line"><span class="cl">               <span class="na">domainObjectName=</span><span class="s">&#34;User&#34;</span>
</span></span><span class="line"><span class="cl">               <span class="na">enableCountByExample=</span><span class="s">&#34;false&#34;</span>
</span></span><span class="line"><span class="cl">               <span class="na">enableUpdateByExample=</span><span class="s">&#34;false&#34;</span>
</span></span><span class="line"><span class="cl">               <span class="na">enableDeleteByExample=</span><span class="s">&#34;false&#34;</span>
</span></span><span class="line"><span class="cl">               <span class="na">enableSelectByExample=</span><span class="s">&#34;false&#34;</span>
</span></span><span class="line"><span class="cl">               <span class="na">selectByExampleQueryId=</span><span class="s">&#34;false&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/context&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/generatorConfiguration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>在 application.properties 中配置数据库基本信息</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 指定 MySQL 驱动位置
</span></span><span class="line"><span class="cl">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
</span></span><span class="line"><span class="cl">spring.datasource.url=jdbc:mysql://127.0.0.1:3306/springbootdb?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false
</span></span><span class="line"><span class="cl">spring.datasource.username=root
</span></span><span class="line"><span class="cl">spring.datasource.password=129807
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>双击 Maven 工具中的 mybatis-generator:generate</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211116120222194.png" alt="image-20211116120222194" style="zoom:67%;" />
<ul>
<li>生成 mapper 包（mapper接口和mapper映射文件）及 model 包（实体类）</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211116120343792.png" alt="image-20211116120343792" style="zoom:50%;" />
<ul>
<li>自动生成的默认 mapper 接口包含的功能
<ul>
<li>==指定 MyBatis 的 mapper 映射文件位置==
<ol>
<li>在每一个 mapper 接口上标注 @Mapper 注解</li>
<li>在 SpringBoot 的主方法上标注 @MapperScan(basePackages = {&quot;<strong>mapper 包的 source root 路径</strong>&quot;}) 【推荐】</li>
<li>在 application.properties 中指定 Mybatis 映射文件的路径 <code>mybatis.mapper-locations=classpath:mapper/*.xml</code></li>
</ol>
</li>
</ul>
</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/mybatis逆向工程映射mapper接口.jpg" alt="mybatis逆向工程映射mapper接口" style="zoom:50%;" />
<ul>
<li>在 pom.xml 中添加指定资源路径，让java下所有 .xml 文件都参与编译</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;resources&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;resource&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;directory&gt;</span>src/main/java<span class="nt">&lt;/directory&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;includes&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;include&gt;</span>**/*.xml<span class="nt">&lt;/include&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/includes&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/resource&gt;</span>
</span></span><span class="line"><span class="cl"> <span class="nt">&lt;/resources&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="事务支持" class="headerLink">
    <a href="#%e4%ba%8b%e5%8a%a1%e6%94%af%e6%8c%81" class="header-mark"></a>事务支持</h3><ul>
<li>在 SpringBoot 的主方法上标注注解 @EnableTransactionManagement 开启事务</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211116164231489.png" alt="image-20211116164231489" style="zoom:50%;" />
<ul>
<li>在需要事务的 service 方法上标注注解 @Transactional
<ul>
<li>在开启了事务的方法中抛出异常就会自动 rollback 回滚</li>
</ul>
</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211116170645632.png" alt="image-20211116170645632" style="zoom:50%;" />
<h2 id="springboot-整合redis" class="headerLink">
    <a href="#springboot-%e6%95%b4%e5%90%88redis" class="header-mark"></a>SpringBoot 整合Redis</h2><ul>
<li>
<p>在创建项目时勾选 NoSQL  中的 Spring Data Redis</p>
  <img src="SpringBoot自学笔记md版.assets/image-20211116171407709.png" alt="image-20211116171407709" style="zoom:50%;" />
</li>
<li>
<p>在 application.properties 中配置 Redis 连接基本信息</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#配置redis连接信息
</span></span><span class="line"><span class="cl">spring.redis.host=192.168.30.128
</span></span><span class="line"><span class="cl">spring.redis.port=6379
</span></span><span class="line"><span class="cl">spring.redis.password=129807
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>在业务层定义 RedisTemplate 类变量，让 Spring 容器自动导入</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Resource</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">RedisTemplate</span> <span class="n">redisTemplate</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForValue</span><span class="o">().</span><span class="na">set</span><span class="o">(</span><span class="s">&#34;userAll&#34;</span><span class="o">,</span> <span class="n">list</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForValue</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;userAll&#34;</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="redis-的缓存穿透问题" class="headerLink">
    <a href="#redis-%e7%9a%84%e7%bc%93%e5%ad%98%e7%a9%bf%e9%80%8f%e9%97%ae%e9%a2%98" class="header-mark"></a>Redis 的缓存穿透问题</h3><ul>
<li>Redis 作为数据库的缓存数据库时，多线程并发同时请求一条数据时，Redis 中并没有这条数据就会同时从数据库中读取数据。</li>
</ul>
<p><strong>解决方案：</strong></p>
<ol>
<li>为业务方法添加 <code>synchronized</code> 锁，只有第一次访问数据库，第二次时 Redis 中已经有缓存，其余都访问 Redis
<ul>
<li>会使并发失效，降低运行速度</li>
</ul>
</li>
<li>为业务代码块添加 <code>synchronized</code> 锁，在第一批次并发请求中，第一个请求到数据并存到缓存服务器后，第二个请求能直接读取到缓存数据</li>
</ol>
<img src="SpringBoot自学笔记md版.assets/image-20211121150211775.png" alt="image-20211121150211775" style="zoom:50%;" />
<h3 id="redis-集群哨兵模式" class="headerLink">
    <a href="#redis-%e9%9b%86%e7%be%a4%e5%93%a8%e5%85%b5%e6%a8%a1%e5%bc%8f" class="header-mark"></a>Redis 集群、哨兵模式</h3><ul>
<li>Redis 作为数据库的缓存数据库时，一旦宕机项目可能无法正常运行，这时就用到了集群</li>
<li>多台 Redis 数据库做集群时，通常由一台主服务器多台从服务器组成，当主节点数据改变时，从节点自动依照改变</li>
</ul>
<p><strong>配置主从节点：</strong></p>
<ul>
<li>主节点</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/Redis主节点.jpg" alt="Redis主节点" style="zoom:50%;" />
<ul>
<li>从节点</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/Redis从节点配置.jpg" alt="Redis从节点配置" style="zoom: 45%;" />
<p><strong>配置哨兵节点：</strong></p>
<ul>
<li>哨兵：类似于 Dubbo 的注册中心，Java 程序与哨兵交互，由哨兵管理节点的主从（依照宕机情况）。实现<strong>高可用</strong>
<ul>
<li>和 Dubbo 的 Zookeeper 注册中心一样，并不是每次都访问哨兵，当主节点不可用时才会由哨兵管理</li>
</ul>
</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211117211314994.png" alt="image-20211117211314994" style="zoom:50%;" />
<ul>
<li><code>sentinel.conf</code> * 节点数量</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/Redis哨兵配置.jpg" alt="Redis哨兵配置" style="zoom:50%;" />
<ul>
<li>启动哨兵 * 节点数量</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211117212704135.png" alt="image-20211117212704135" style="zoom:50%;" />
<ul>
<li>配置 application.properties 配置</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#配置redis哨兵连接信息：哨兵地址们，哨兵名称，密码
</span></span><span class="line"><span class="cl">spring.redis.sentinel.nodes=192.168.235.128:26380,192.168.235.128:26382,192.168.235.128:26384
</span></span><span class="line"><span class="cl">spring.redis.sentinel.master=mymaster
</span></span><span class="line"><span class="cl">spring.redis.password=123456
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="springboot-热部署插件" class="headerLink">
    <a href="#springboot-%e7%83%ad%e9%83%a8%e7%bd%b2%e6%8f%92%e4%bb%b6" class="header-mark"></a>SpringBoot 热部署插件：</h2><ul>
<li>
<p>热部署插件可以在代码修改后自动重新加载修改内容，避免重启服务器反复编译未修改代码</p>
</li>
<li>
<p>在 pom.xml 中引入热部署插件依赖</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--SpringBoot热部署插件--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;artifactId&gt;</span>spring-boot-devtools<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;optional&gt;</span>true<span class="nt">&lt;/optional&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Recompile 选中的文件，避免重新编译所有文件。</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211117214112922.png" alt="image-20211117214112922" style="zoom:50%;" />
<h2 id="springboot-启动非-web-工程" class="headerLink">
    <a href="#springboot-%e5%90%af%e5%8a%a8%e9%9d%9e-web-%e5%b7%a5%e7%a8%8b" class="header-mark"></a>SpringBoot 启动非 WEB 工程</h2><ul>
<li>在创建模块时，不勾选起步依赖</li>
</ul>
<ol>
<li>在主入口 run 方法前接收返回值：Spring 容器，调用 getBean 获取实例对象</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@SpringBootApplication</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringBootjavaApplication</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">SpringBootjavaApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">DoSomeService</span> <span class="n">doSomeService</span> <span class="o">=</span> <span class="o">(</span><span class="n">DoSomeService</span><span class="o">)</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;doSomeService&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">doSomeService</span><span class="o">.</span><span class="na">sayHello</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>让主入口类实现 <code>CommandLineRunner</code> 接口，并重写 run 方法
<ul>
<li>程序启动后会调用 run 方法，此时的 Spring 容器已经启动完成</li>
</ul>
</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@SpringBootApplication</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringBootjavaApplication</span> <span class="kd">implements</span> <span class="n">CommandLineRunner</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Resource</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">DoSomeService</span> <span class="n">doSomeService</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">SpringBootjavaApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">doSomeService</span><span class="o">.</span><span class="na">sayHello</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="springboot-使用拦截器" class="headerLink">
    <a href="#springboot-%e4%bd%bf%e7%94%a8%e6%8b%a6%e6%88%aa%e5%99%a8" class="header-mark"></a>SpringBoot 使用拦截器</h2><ol>
<li>创建拦截器类</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Component</span> 	
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyInterceptor</span> <span class="kd">implements</span> <span class="n">HandlerInterceptor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">preHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;拦截器成功拦截&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>创建配置类
<ul>
<li><code>@Configuration</code> 注解为标记此类为 Spring 的配置类</li>
<li>实现 WebMvcConfigurer 接口相当于将此类添加到 MVC 的命名空间中</li>
<li>通过重写 addInterceptors 方法，添加自定义的拦截器类，配置拦截规则</li>
</ul>
</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Configuration</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyConfig</span> <span class="kd">implements</span> <span class="n">WebMvcConfigurer</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Resource</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">MyInterceptor</span> <span class="n">myInterceptor</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 注册拦截器，相当于 &lt;mvc:interceptors&gt;&lt;/mvc:interceptors&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param registry 拦截器的注册对象
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addInterceptors</span><span class="o">(</span><span class="n">InterceptorRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//添加拦截器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">InterceptorRegistration</span> <span class="n">interceptorRegistration</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="na">addInterceptor</span><span class="o">(</span><span class="n">myInterceptor</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//配置拦截规则
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">interceptorRegistration</span><span class="o">.</span><span class="na">addPathPatterns</span><span class="o">(</span><span class="s">&#34;/private/**&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//配置请求忽略规则
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">interceptorRegistration</span><span class="o">.</span><span class="na">excludePathPatterns</span><span class="o">(</span><span class="s">&#34;/private/test02&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>使用拦截器，在访问 test01 时拦截，访问 test02 时忽略</li>
</ol>
<img src="SpringBoot自学笔记md版.assets/image-20211119173758979.png" alt="image-20211119173758979" style="zoom:50%;" />
<h2 id="springboot-字符编码" class="headerLink">
    <a href="#springboot-%e5%ad%97%e7%ac%a6%e7%bc%96%e7%a0%81" class="header-mark"></a>SpringBoot 字符编码</h2><ul>
<li>添加 application.properties 配置</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 指定编码格式
</span></span><span class="line"><span class="cl">spring.http.encoding.charset=UTF-8
</span></span><span class="line"><span class="cl"># 激活HttpSpringBoot编码
</span></span><span class="line"><span class="cl">spring.http.encoding.enabled=true
</span></span><span class="line"><span class="cl"># 强制Request和Response都是用这种编码格式
</span></span><span class="line"><span class="cl">spring.http.encoding.force=true
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="springboot-打包-war-包" class="headerLink">
    <a href="#springboot-%e6%89%93%e5%8c%85-war-%e5%8c%85" class="header-mark"></a>SpringBoot 打包 war 包</h2><ul>
<li>
<p>在创建模块时就选择 war，pom.xml 中默认打包方式就会变成 war 包，在打包时内嵌 Tomcat 不参与打包</p>
</li>
<li>
<p>点击 Maven 工具中的 package 即可在 target 目录中生成 war 包</p>
</li>
</ul>
<h2 id="springboot-打包-jar-包" class="headerLink">
    <a href="#springboot-%e6%89%93%e5%8c%85-jar-%e5%8c%85" class="header-mark"></a>SpringBoot 打包 jar 包</h2><ul>
<li>打包 jar 包并上传至 linux 服务器，使用 <code>java -jar jar包文件名.jar</code> 启动 SpringBoot 内嵌Tomcat</li>
<li>封装 shell 脚本
<ul>
<li>touch 一个 run.sh 文件，在文件内写入 <code>java -jar jar包文件名.jar</code> 命令</li>
<li>chmod 777 run.sh 修改文件权限</li>
<li>./run.sh 启动 Tomcat 服务器</li>
</ul>
</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211119210015993.png" alt="image-20211119210015993" style="zoom:50%;" />
<h2 id="springboot-使用-servletfilter" class="headerLink">
    <a href="#springboot-%e4%bd%bf%e7%94%a8-servletfilter" class="header-mark"></a>SpringBoot 使用 Servlet，Filter</h2><p><strong>Servlet：【已被控制器替代，不必掌握】</strong></p>
<ol>
<li>在入口类上标注 <code>@ServletComponentScan(basePackage = &quot;Servlet包路径&quot;)</code>
<ul>
<li>在 Servlet 类上方标注 <code>WebServlet(&quot;/项目名&quot;)</code> 注解，即可让 SpringBoot 扫描到</li>
</ul>
</li>
<li>通过 <code>@Configuration </code> 配置类获取 Bean</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">   <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">   	* @Bean标记当前方法是一个Spring的Bean配置方法
</span></span></span><span class="line"><span class="cl"><span class="cm">	* 方法名就是Bean的ID，返回值就是Bean的Class
</span></span></span><span class="line"><span class="cl"><span class="cm">    */</span>
</span></span><span class="line"><span class="cl">   <span class="nd">@Bean</span>
</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="n">ServletRegistrationBean</span> <span class="nf">heServletRegistrationBean</span><span class="o">(</span><span class="n">TestServlet</span> <span class="n">testServlet</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">     <span class="c1">//获取Servlet注册Bean
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="n">ServletRegistrationBean</span> <span class="n">servletRegistrationBean</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServletRegistrationBean</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">     <span class="c1">//注册Servlet
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="n">servletRegistrationBean</span><span class="o">.</span><span class="na">setServlet</span><span class="o">(</span><span class="n">testServlet</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">     <span class="c1">//返回class
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="k">return</span> <span class="n">servletRegistrationBean</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">   <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Filter：【已被拦截器替代，不必掌握】</strong></p>
<ol>
<li>
<p>在入口类上标注 <code>@ServletComponentScan(basePackage = &quot;Filter包路径&quot;)</code></p>
<ul>
<li>在 Filter类上方标注 <code>@WebFilter(urlPatterns=&quot;/*&quot;)</code> 注解，即可让 SpringBoot 扫描到</li>
</ul>
</li>
<li>
<p>通过 <code>@Configuration </code> 配置类获取 Bean</p>
</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="nd">@Bean</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">FilterRegistrationBean</span> <span class="nf">heFilterRegistration</span><span class="o">(</span><span class="n">TestFilter</span> <span class="n">testFilter</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//获取Filter注册Bean
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="n">FilterRegistrationBean</span> <span class="n">filterRegistration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FilterRegistrationBean</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//注册Filter
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="n">filterRegistration</span><span class="o">.</span><span class="na">setFilter</span><span class="o">(</span><span class="n">testFilter</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//设置过滤路径
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="n">filterRegistration</span><span class="o">.</span><span class="na">addUrlPatterns</span><span class="o">(</span><span class="s">&#34;/*&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//返回class
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">return</span> <span class="n">filterRegistration</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="sprintboot-健康检查机制" class="headerLink">
    <a href="#sprintboot-%e5%81%a5%e5%ba%b7%e6%a3%80%e6%9f%a5%e6%9c%ba%e5%88%b6" class="header-mark"></a>SprintBoot 健康检查机制</h2><ul>
<li>在创建模块时勾选 Ops 中的Spring Boot Actuator 【不必掌握】</li>
</ul>
<table>
<thead>
<tr>
<th>GET</th>
<th>/env</th>
<th>查看所有环境变量</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>HTTP方法</strong></td>
<td><strong>路径</strong></td>
<td><strong>描述</strong></td>
</tr>
<tr>
<td>GET</td>
<td>/configprops</td>
<td>查看配置属性，包括默认配置   <a href="http://www.haojson.com" target="_blank" rel="noopener noreffer">http://www.haojson.com</a>对json进行格式化</td>
</tr>
<tr>
<td>GET</td>
<td>/beans</td>
<td>查看Spring容器目前初始化的bean及其关系列表</td>
</tr>
<tr>
<td>GET</td>
<td>/mappings</td>
<td>查看所有url映射</td>
</tr>
<tr>
<td>GET</td>
<td>/health</td>
<td>查看应用健康指标</td>
</tr>
<tr>
<td>GET</td>
<td>/info</td>
<td>查看应用信息</td>
</tr>
<tr>
<td>GET</td>
<td>/metrics</td>
<td>查看应用基本指标</td>
</tr>
<tr>
<td>GET</td>
<td>/metrics/{name}</td>
<td>查看具体指标</td>
</tr>
<tr>
<td>JMX</td>
<td>/shutdown</td>
<td>关闭应用</td>
</tr>
</tbody>
</table>
<h2 id="springboot-中的-thymeleaf-模板" class="headerLink">
    <a href="#springboot-%e4%b8%ad%e7%9a%84-thymeleaf-%e6%a8%a1%e6%9d%bf" class="header-mark"></a>SpringBoot 中的 Thymeleaf 模板</h2><ul>
<li>Thymeleaf 是用来开发 Web 和独立环境项目的服务器端的 Java 模版引擎</li>
<li>SpringBoot 并不支持 JSP 但完美整合了 Thymeleaf ，甚至集成了 Thymeleaf 的自动化配置、视图解析器</li>
</ul>
<h3 id="thymeleaf-的特点" class="headerLink">
    <a href="#thymeleaf-%e7%9a%84%e7%89%b9%e7%82%b9" class="header-mark"></a>Thymeleaf 的特点</h3><ul>
<li>动静结合：Thymeleaf 在有网络和无网络的环境下皆可运行，即能直接显示模板上的静态数据；也能像 Jsp 一样动态的从后台接收数据并替换掉模板上的静态数据。这是由于以 HTML 标签为载体，要寄托在 HTML 标签下实现。</li>
<li>开箱即用：它提供标准和 spring 标准两种方言，可以直接套用模板实现 JSTL、 OGNL 表达式效果，避免每天套模板、该jstl、改标签的困扰。同时开发人员也可以扩展和创建自定义的方言。</li>
<li>多方言支持：Thymeleaf 提供spring标准方言和一个与 SpringMVC 完美集成的可选模块，可以快速的实现表单绑定、属性编辑器、国际化等功能。</li>
</ul>
<h3 id="使用-thymeleaf" class="headerLink">
    <a href="#%e4%bd%bf%e7%94%a8-thymeleaf" class="header-mark"></a>使用 Thymeleaf</h3><ul>
<li>创建项目时，勾选 Boot DevTools 热部署、Spring Web 后端、Thymeleaf 百里香叶 起步依赖。</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211120102218462.png" alt="image-20211120102218462" style="zoom: 50%;" />
<ul>
<li>在 application.properties 属性配置文件中，关闭 thymeleaf 的缓存，方便调试</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#开发阶段，建议关闭thymeleaf的缓存，不然没有办法看到实时页面
</span></span><span class="line"><span class="cl">spring.thymeleaf.cache=false
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>在 application.properties 属性配置文件中，配置 Thymeleaf 的视图解析器 ( 同指向 WEB-INF 中的 JSP 的视图解析器一样 )</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#默认视图视图前缀
</span></span><span class="line"><span class="cl">spring.thymeleaf.prefix=classpath:/templates/
</span></span><span class="line"><span class="cl">#默认视图后缀
</span></span><span class="line"><span class="cl">spring.thymeleaf.suffix=.html
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>在 templates 路径下创建 html 文件，在 html 标签中添加属性 <code>&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</code></li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211120103849135.png" alt="image-20211120103849135" style="zoom:50%;" />
<ul>
<li>使用、效果</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211120104310314.png" alt="image-20211120104310314" style="zoom:50%;" />
<img src="SpringBoot自学笔记md版.assets/image-20211120104437993.png" alt="image-20211120104437993" style="zoom:50%;" />
<h3 id="thymeleaf-的变量表达式" class="headerLink">
    <a href="#thymeleaf-%e7%9a%84%e5%8f%98%e9%87%8f%e8%a1%a8%e8%be%be%e5%bc%8f" class="header-mark"></a>Thymeleaf 的变量表达式</h3><ol>
<li><code>${变量名}</code> 获取变量值</li>
<li><code>${变量名.属性名}</code> 获取对象中属性名</li>
<li><code>${变量名.方法名()}</code> 获取对象方法的返回值</li>
</ol>
<h3 id="thymeleaf-的选择变量表达式" class="headerLink">
    <a href="#thymeleaf-%e7%9a%84%e9%80%89%e6%8b%a9%e5%8f%98%e9%87%8f%e8%a1%a8%e8%be%be%e5%bc%8f" class="header-mark"></a>Thymeleaf 的选择变量表达式</h3><ul>
<li>需配合 th:object 使用</li>
</ul>
<ol>
<li><code>*{变量名}</code> 获取变量值</li>
<li><code>*{变量名.属性名}</code> 获取对象中属性名</li>
<li><code>*{变量名.方法名()}</code> 获取对象方法的返回值</li>
</ol>
<img src="SpringBoot自学笔记md版.assets/image-20211120113540949.png" alt="image-20211120113540949" style="zoom:50%;" />
<h3 id="thymeleaf-的-url-表达式" class="headerLink">
    <a href="#thymeleaf-%e7%9a%84-url-%e8%a1%a8%e8%be%be%e5%bc%8f" class="header-mark"></a>Thymeleaf 的 URL 表达式</h3><ul>
<li><code>@{路径}</code> 用于 script、link、a、form、img 标签的地址属性中获取动态数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">    <span class="c">&lt;!--互联网绝对路径--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&#34;@{&#39;https://www.baidu.com/s?wd=&#39;+${user.name}}&#34;</span> <span class="na">target</span><span class="o">=</span><span class="s">&#34;_blank&#34;</span><span class="p">&gt;</span>百度<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--项目相对的路径--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&#34;@{/bb/test02}&#34;</span> <span class="na">target</span><span class="o">=</span><span class="s">&#34;_blank&#34;</span><span class="p">&gt;</span>test02<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--项目的相对路径【不推荐，当项目层次结构复杂时，有可能会丢失地址路径】--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&#34;@{bb/test02}&#34;</span> <span class="na">target</span><span class="o">=</span><span class="s">&#34;_blank&#34;</span><span class="p">&gt;</span>test02<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><img src="SpringBoot自学笔记md版.assets/image-20211120115425889.png" alt="image-20211120115425889" style="zoom:50%;" />
<h3 id="thymeleaf-的常见属性" class="headerLink">
    <a href="#thymeleaf-%e7%9a%84%e5%b8%b8%e8%a7%81%e5%b1%9e%e6%80%a7" class="header-mark"></a>Thymeleaf 的常见属性</h3><ol>
<li><code>th:value = &quot;${...}&quot;</code> 将动态数据设置到表单元素的 value 属性中</li>
<li><code>th:attr = &quot;属性名=${...}&quot;</code> 可以修改指定属性的值，可以自定义属性</li>
<li><code>th:onclick = &quot;js代码&quot;</code> 可以实现事件处理，在 js 代码中可以拼接 Thymeleaf 的变量表达式（只支持数字和布尔类型）</li>
</ol>
<h3 id="thymeleaf-的-each-迭代-list-集合" class="headerLink">
    <a href="#thymeleaf-%e7%9a%84-each-%e8%bf%ad%e4%bb%a3-list-%e9%9b%86%e5%90%88" class="header-mark"></a>Thymeleaf 的 each 迭代 List 集合</h3><ul>
<li>
<p>用法 <code>th:each = &quot;item,itemStat:${itemList}&quot;</code></p>
<ul>
<li>item：每次的迭代对象</li>
<li>itemStat：迭代对象的信息（省略时默认名为 item名+Stat）
<ul>
<li>itemStat.index：0开始下标</li>
<li>itemStat.count：1开始下标</li>
<li>itemStat.size：迭代对象的大小</li>
<li>itemStat.even / odd：当前迭代对象下标的奇偶，0开始</li>
<li>itemStat.first：是否是第一个</li>
<li>itemStat.last：是否是最后一个</li>
<li>itemStat.current：当前迭代对象，等价于 item</li>
</ul>
</li>
<li>itemList：后台传过来的数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">tr</span> <span class="na">th:each</span><span class="o">=</span><span class="s">&#34;user,itemStat:${userList}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${itemStat.count}&#34;</span><span class="p">&gt;</span>序号<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${user.name}&#34;</span><span class="p">&gt;</span>姓名<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${user.sex}&#34;</span><span class="p">&gt;</span>性别<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${user.age}&#34;</span><span class="p">&gt;</span>年龄<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&#34;@{&#39;/modify?id=&#39;+${user.id}+&#39;xxxxx&#39;}&#34;</span><span class="p">&gt;</span>修改<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&#34;@{&#39;/delete?id=&#39;+${user.id}}&#34;</span><span class="p">&gt;</span>删除<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="thymeleaf-的-each-迭代-map-集合" class="headerLink">
    <a href="#thymeleaf-%e7%9a%84-each-%e8%bf%ad%e4%bb%a3-map-%e9%9b%86%e5%90%88" class="header-mark"></a>Thymeleaf 的 each 迭代 Map 集合</h3><ol>
<li>直接对 Map 的 key，value 进行迭代</li>
</ol>
<ul>
<li>用法：<code>th:each = &quot;node:${itemMap}&quot;</code>
<ul>
<li>node：itemMap 每次的迭代对象
<ul>
<li>node.key：获取当前键值对中的 key</li>
<li>node.value：活动当前键值对中的 value</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">tr</span> <span class="na">th:each</span><span class="o">=</span><span class="s">&#34;node:${userMap}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${nodeStat.count}&#34;</span><span class="p">&gt;</span>序号<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${node.key}&#34;</span><span class="p">&gt;</span>key<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${node.value}&#34;</span><span class="p">&gt;</span>value<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${node.value.id}&#34;</span><span class="p">&gt;</span>id<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${node.value.name}&#34;</span><span class="p">&gt;</span>姓名<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${node.value.age}&#34;</span><span class="p">&gt;</span>年龄<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${node.value.sex}&#34;</span><span class="p">&gt;</span>性别<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>将 Map 转换成 keySet 后，通过遍历 key 获取 value 进行迭代</li>
</ol>
<ul>
<li>用法：<code>th:each = &quot;key:${itemMap.keySet()}&quot;</code>
<ul>
<li>key：每次迭代的 key 对象
<ul>
<li>itemMap.get(key)：取当前 key 对应的 value</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">tr</span> <span class="na">th:each</span><span class="o">=</span><span class="s">&#34;key:${userMap.keySet()}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${keyStat.count}&#34;</span><span class="p">&gt;</span>序号<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${key}&#34;</span><span class="p">&gt;</span>key<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${userMap.get(key)}&#34;</span><span class="p">&gt;</span>value<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${userMap.get(key).id}&#34;</span><span class="p">&gt;</span>id<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${userMap.get(key).name}&#34;</span><span class="p">&gt;</span>姓名<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${userMap.get(key).age}&#34;</span><span class="p">&gt;</span>年龄<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${userMap.get(key).sex}&#34;</span><span class="p">&gt;</span>性别<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="thymeleaf-的-ifunless-表达式" class="headerLink">
    <a href="#thymeleaf-%e7%9a%84-ifunless-%e8%a1%a8%e8%be%be%e5%bc%8f" class="header-mark"></a>Thymeleaf 的 if、unless 表达式</h3><ul>
<li><code>th:if = &quot;${表达式}&quot;</code> 如果表达式为 false 则删除所在标签</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:if</span><span class="o">=</span><span class="s">&#34;${user.sex == &#39;1&#39;}&#34;</span><span class="p">&gt;</span>男<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:if</span><span class="o">=</span><span class="s">&#34;${user.sex == &#39;0&#39;}&#34;</span><span class="p">&gt;</span>女<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>th:unless = &quot;${表达式}&quot;</code> 如果表达式为 true 则删除所在标签【不推荐使用】</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:unless</span><span class="o">=</span><span class="s">&#34;${user.sex == &#39;1&#39;}&#34;</span><span class="p">&gt;</span>女<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:unless</span><span class="o">=</span><span class="s">&#34;${user.sex == &#39;0&#39;}&#34;</span><span class="p">&gt;</span>男<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="thymeleaf-的-switch-case-表达式" class="headerLink">
    <a href="#thymeleaf-%e7%9a%84-switch-case-%e8%a1%a8%e8%be%be%e5%bc%8f" class="header-mark"></a>Thymeleaf 的 switch case 表达式</h3><ul>
<li><code>th:case=&quot;*&quot;</code> 当所有 case 都不匹配时执行</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h3</span> <span class="na">th:switch</span><span class="o">=</span><span class="s">&#34;${week}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">th:case</span><span class="o">=</span><span class="s">&#34;1&#34;</span><span class="p">&gt;</span>星期一<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">th:case</span><span class="o">=</span><span class="s">&#34;2&#34;</span><span class="p">&gt;</span>星期二<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">th:case</span><span class="o">=</span><span class="s">&#34;3&#34;</span><span class="p">&gt;</span>星期三<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">th:case</span><span class="o">=</span><span class="s">&#34;4&#34;</span><span class="p">&gt;</span>星期四<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">th:case</span><span class="o">=</span><span class="s">&#34;5&#34;</span><span class="p">&gt;</span>星期五<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">th:case</span><span class="o">=</span><span class="s">&#34;6&#34;</span><span class="p">&gt;</span>星期六<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">th:case</span><span class="o">=</span><span class="s">&#34;7&#34;</span><span class="p">&gt;</span>星期日<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">th:case</span><span class="o">=</span><span class="s">&#34;*&#34;</span><span class="p">&gt;</span>错误数据<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="thymeleaf-的内敛文本内敛脚本" class="headerLink">
    <a href="#thymeleaf-%e7%9a%84%e5%86%85%e6%95%9b%e6%96%87%e6%9c%ac%e5%86%85%e6%95%9b%e8%84%9a%e6%9c%ac" class="header-mark"></a>Thymeleaf 的内敛文本、内敛脚本</h3><ul>
<li>
<p>内敛：inline</p>
</li>
<li>
<p><code>[[${动态数据}]]</code> 将文本直接显示在页面中</p>
</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211120164835649.png" alt="image-20211120164835649" style="zoom:50%;" />
<ul>
<li><code>[[${动态数据}]]</code> 将文本直接用在 js 代码中
<ul>
<li>为父标签添加 <code>th:inline = &quot;javascript&quot;</code> 后，会自动为内嵌文本添加双引号。</li>
</ul>
</li>
</ul>
<img src="SpringBoot自学笔记md版.assets/image-20211120165454292.png" alt="image-20211120165454292" style="zoom:50%;" />
<h3 id="thymeleaf-的字符串拼接" class="headerLink">
    <a href="#thymeleaf-%e7%9a%84%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%8b%bc%e6%8e%a5" class="header-mark"></a>Thymeleaf 的字符串拼接</h3><ul>
<li><code>|</code> <code>| </code>中写的文本和变量表达式会被 Thymeleaf 自动解析拼接（优雅，永不过时）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&#34;@{|/modify?id=${user.id}&amp;xx=xxx|}&#34;</span><span class="p">&gt;</span>修改<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&#34;@{&#39;/delete?id=&#39;+${user.id}}&#34;</span><span class="p">&gt;</span>删除<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="thymeleaf-的三元运算符" class="headerLink">
    <a href="#thymeleaf-%e7%9a%84%e4%b8%89%e5%85%83%e8%bf%90%e7%ae%97%e7%ac%a6" class="header-mark"></a>Thymeleaf 的三元运算符</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">男:<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;sex&#34;</span> <span class="na">th:checked</span><span class="o">=</span><span class="s">&#34;*{sex==&#39;1&#39;?true:false}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">女:<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;radio&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;sex&#34;</span> <span class="na">th:checked</span><span class="o">=</span><span class="s">&#34;*{sex==&#39;0&#39;?true:false}&#34;</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="thymeleaf-的表达式基本对象" class="headerLink">
    <a href="#thymeleaf-%e7%9a%84%e8%a1%a8%e8%be%be%e5%bc%8f%e5%9f%ba%e6%9c%ac%e5%af%b9%e8%b1%a1" class="header-mark"></a>Thymeleaf 的表达式基本对象</h3><ul>
<li>#request 对象、session 对象</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">p</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${#request.getSession().getAttribute(&#39;week&#39;)}&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">p</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${#httpSession.getAttribute(&#39;week&#39;)}&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">p</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${session.week}&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="springboot-的-rest-接口架构风格" class="headerLink">
    <a href="#springboot-%e7%9a%84-rest-%e6%8e%a5%e5%8f%a3%e6%9e%b6%e6%9e%84%e9%a3%8e%e6%a0%bc" class="header-mark"></a>SpringBoot 的 REST 接口架构风格</h2><ul>
<li>
<p>REST: 表述性状态传递，是一组客户端和服务器交互时架构理念和设计原则</p>
</li>
<li>
<p>架构风格：api 的组织方式</p>
<ul>
<li>传统：https://www.bilibili.com/video/BVxxx?p=57</li>
<li>RESTful 风格：https://www.bilibili.com/video/BVxxx/p/57</li>
</ul>
</li>
<li>
<p>REST 风格的增删改查</p>
<ul>
<li>查：GET</li>
<li>增：POST</li>
<li>删：DELETE</li>
<li>改：PUT</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;xxx&#34;</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    姓名：<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;username&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    密码：<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;password&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;password&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;hidden&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;_method&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;PUT&#34;</span><span class="p">&gt;</span> <span class="c">&lt;!--真实的提交方式--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>常用注解：</p>
<ul>
<li>
<p><code>@PathVariable</code>：路径变量，从 url 中获取数据</p>
<p><img
        class="lazyload"
        data-src="SpringBoot%e8%87%aa%e5%ad%a6%e7%ac%94%e8%ae%b0md%e7%89%88.assets/image-20220117170322165.png"
        data-srcset="SpringBoot%e8%87%aa%e5%ad%a6%e7%ac%94%e8%ae%b0md%e7%89%88.assets/image-20220117170322165.png, SpringBoot%e8%87%aa%e5%ad%a6%e7%ac%94%e8%ae%b0md%e7%89%88.assets/image-20220117170322165.png 1.5x, SpringBoot%e8%87%aa%e5%ad%a6%e7%ac%94%e8%ae%b0md%e7%89%88.assets/image-20220117170322165.png 2x"
        data-sizes="auto"
        alt="SpringBoot自学笔记md版.assets/image-20220117170322165.png"
        title="image-20220117170322165"></p>
<p>当形参名和路径变量名相同时，value 可省略</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/test/{page}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">String</span> <span class="nf">test</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="n">Integer</span> <span class="n">page</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s">&#34;test/&#34;</span><span class="o">+</span><span class="n">page</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><code>@GetMapping</code></p>
<p>查询时用，相当于在 RequestMapping 基础上指定 method 参数必须为 get</p>
<p><img
        class="lazyload"
        data-src="SpringBoot%e8%87%aa%e5%ad%a6%e7%ac%94%e8%ae%b0md%e7%89%88.assets/image-20220117165618431.png"
        data-srcset="SpringBoot%e8%87%aa%e5%ad%a6%e7%ac%94%e8%ae%b0md%e7%89%88.assets/image-20220117165618431.png, SpringBoot%e8%87%aa%e5%ad%a6%e7%ac%94%e8%ae%b0md%e7%89%88.assets/image-20220117165618431.png 1.5x, SpringBoot%e8%87%aa%e5%ad%a6%e7%ac%94%e8%ae%b0md%e7%89%88.assets/image-20220117165618431.png 2x"
        data-sizes="auto"
        alt="SpringBoot自学笔记md版.assets/image-20220117165618431.png"
        title="image-20220117165618431"></p>
</li>
<li>
<p><code>@PostMapping</code></p>
<p>添加时用</p>
</li>
<li>
<p><code>@PutMapping</code></p>
<p>修改时用</p>
</li>
<li>
<p><code>@DeleteMapping</code></p>
<p>删除时用</p>
</li>
</ul>
</li>
<li>
<p>在 application.properties 启用对 put ，delete 请求方式的支持</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 启用 hiddenmethod 过滤器
</span></span><span class="line"><span class="cl">spring.mvc.hiddenmethod.filter.enabled=true
</span></span></code></pre></td></tr></table>
</div>
</div></div>

        <div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2021-11-15</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span><a class="link-to-mardown" href=/springboot%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0md%E7%89%88/index.md target="_blank" rel="noopener noreferrer">阅读原始文档</a>
                    </span></div>
            <div class="post-info-share">
                <span><a href="#" onclick="return false;" title="分享到 微博" data-sharer="weibo" data-url="https://liujjjjn.github.io/springboot%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0md%E7%89%88/" data-title="SpringBoot自学笔记md版" data-ralateuid="6018937938"><i class="fab fa-weibo fa-fw"></i></a><a href="#" onclick="return false;" title="分享到 Evernote" data-sharer="evernote" data-url="https://liujjjjn.github.io/springboot%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0md%E7%89%88/" data-title="SpringBoot自学笔记md版"><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/dubbo%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0md%E7%89%88/" class="prev" rel="prev" title="Dubbo自学笔记md版"><i class="fas fa-angle-left fa-fw"></i>Dubbo自学笔记md版</a>
            <a href="/rabbitmq%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0md%E7%89%88/" class="next" rel="next" title="RabbitMQ自学笔记md版">RabbitMQ自学笔记md版<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"></div></article></div>
        </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://liujjjjn.github.io/" target="_blank" rel="noopener noreferrer">刘嘉宁</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
            <div class="footer-line"></div>
            <div class="footer-line">
            </div>
        </div></footer></div>

    <div id="fixed-buttons"><a href="#back-to-top" id="back-to-top-button" class="fixed-button" title="回到顶部">
            <i class="fas fa-arrow-up fa-fw"></i>
        </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
            <i class="fas fa-comment fa-fw"></i>
        </a>
    </div><div class="assets"><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/fuse/fuse.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/tablesort/tablesort.min.js"></script><script type="text/javascript" src="/lib/topbar/topbar.min.js"></script><script type="text/javascript" src="/lib/pjax/pjax.min.js"></script><script type="text/javascript" src="/js/theme.min.js" defer></script></div>

<div class="pjax-assets"><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":false,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"没有找到结果","snippetLength":50,"threshold":0.3,"type":"fuse","useExtendedSearch":false},"sharerjs":true,"table":{"sort":true}};</script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js" defer></script><script type="text/javascript" src="/lib/katex/auto-render.min.js" defer></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js" defer></script><script type="text/javascript" src="/lib/katex/mhchem.min.js" defer></script><script type="text/javascript" src="/js/katex.min.js" defer></script><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/katex/copy-tex.min.css">
        <noscript><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"></noscript></div>
</body>

</html>